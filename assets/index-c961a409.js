(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var at,d,Kt,Qt,M,Nt,Xt,gt,Yt,F={},$t=[],he=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ct=Array.isArray;function x(e,t){for(var n in t)e[n]=t[n];return e}function Zt(e){var t=e.parentNode;t&&t.removeChild(e)}function de(e,t,n){var o,i,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?i=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?at.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return et(e,c,o,i,null)}function et(e,t,n,o,i){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++Kt,__i:-1,__u:0};return i==null&&d.vnode!=null&&d.vnode(s),s}function lt(e){return e.children}function I(e,t){this.props=e,this.context=t}function H(e,t){if(t==null)return e.__?H(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?H(e):null}function pe(e,t,n){var o,i=e.__v,s=i.__e,c=e.__P;if(c)return(o=x({},i)).__v=i.__v+1,d.vnode&&d.vnode(o),Pt(c,o,i,e.__n,c.ownerSVGElement!==void 0,32&i.__u?[s]:null,t,s??H(i),!!(32&i.__u),n),o.__v=i.__v,o.__.__k[o.__i]=o,o.__d=void 0,o.__e!=s&&te(o),o}function te(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return te(e)}}function mt(e){(!e.__d&&(e.__d=!0)&&M.push(e)&&!rt.__r++||Nt!==d.debounceRendering)&&((Nt=d.debounceRendering)||Xt)(rt)}function rt(){var e,t,n,o=[],i=[];for(M.sort(gt);e=M.shift();)e.__d&&(n=M.length,t=pe(e,o,i)||t,n===0||M.length>n?(yt(o,t,i),i.length=o.length=0,t=void 0,M.sort(gt)):t&&d.__c&&d.__c(t,$t));t&&yt(o,t,i),rt.__r=0}function ee(e,t,n,o,i,s,c,_,a,u,h){var r,$,l,y,P,b=o&&o.__k||$t,p=t.length;for(n.__d=a,ve(n,t,b),a=n.__d,r=0;r<p;r++)(l=n.__k[r])!=null&&typeof l!="boolean"&&typeof l!="function"&&($=l.__i===-1?F:b[l.__i]||F,l.__i=r,Pt(e,l,$,i,s,c,_,a,u,h),y=l.__e,l.ref&&$.ref!=l.ref&&($.ref&&At($.ref,null,l),h.push(l.ref,l.__c||y,l)),P==null&&y!=null&&(P=y),65536&l.__u||$.__k===l.__k?a=ne(l,a,e):typeof l.type=="function"&&l.__d!==void 0?a=l.__d:y&&(a=y.nextSibling),l.__d=void 0,l.__u&=-196609);n.__d=a,n.__e=P}function ve(e,t,n){var o,i,s,c,_,a=t.length,u=n.length,h=u,r=0;for(e.__k=[],o=0;o<a;o++)c=o+r,(i=e.__k[o]=(i=t[o])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?et(null,i,null,null,null):Ct(i)?et(lt,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?et(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=e,i.__b=e.__b+1,_=ge(i,n,c,h),i.__i=_,s=null,_!==-1&&(h--,(s=n[_])&&(s.__u|=131072)),s==null||s.__v===null?(_==-1&&r--,typeof i.type!="function"&&(i.__u|=65536)):_!==c&&(_===c+1?r++:_>c?h>a-c?r+=_-c:r--:_<c?_==c-1&&(r=_-c):r=0,_!==o+r&&(i.__u|=65536))):(s=n[c])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=H(s)),bt(s,s,!1),n[c]=null,h--);if(h)for(o=0;o<u;o++)(s=n[o])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=H(s)),bt(s,s))}function ne(e,t,n){var o,i;if(typeof e.type=="function"){for(o=e.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=e,t=ne(o[i],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function ge(e,t,n,o){var i=e.key,s=e.type,c=n-1,_=n+1,a=t[n];if(a===null||a&&i==a.key&&s===a.type&&!(131072&a.__u))return n;if(o>(a!=null&&!(131072&a.__u)?1:0))for(;c>=0||_<t.length;){if(c>=0){if((a=t[c])&&!(131072&a.__u)&&i==a.key&&s===a.type)return c;c--}if(_<t.length){if((a=t[_])&&!(131072&a.__u)&&i==a.key&&s===a.type)return _;_++}}return-1}function Dt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||he.test(t)?n:n+"px"}function Q(e,t,n,o,i){var s;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Dt(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||Dt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=Date.now(),e.addEventListener(t,s?Rt:Ot,s)):e.removeEventListener(t,s?Rt:Ot,s);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Ot(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(d.event?d.event(e):e)}}function Rt(e){if(this.l)return this.l[e.type+!0](d.event?d.event(e):e)}function Pt(e,t,n,o,i,s,c,_,a,u){var h,r,$,l,y,P,b,p,S,A,V,N,Wt,J,dt,C=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(a=!!(32&n.__u),s=[_=t.__e=n.__e]),(h=d.__b)&&h(t);t:if(typeof C=="function")try{if(p=t.props,S=(h=C.contextType)&&o[h.__c],A=h?S?S.props.value:h.__:o,n.__c?b=(r=t.__c=n.__c).__=r.__E:("prototype"in C&&C.prototype.render?t.__c=r=new C(p,A):(t.__c=r=new I(p,A),r.constructor=C,r.render=ye),S&&S.sub(r),r.props=p,r.state||(r.state={}),r.context=A,r.__n=o,$=r.__d=!0,r.__h=[],r._sb=[]),r.__s==null&&(r.__s=r.state),C.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=x({},r.__s)),x(r.__s,C.getDerivedStateFromProps(p,r.__s))),l=r.props,y=r.state,r.__v=t,$)C.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(C.getDerivedStateFromProps==null&&p!==l&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(p,A),!r.__e&&(r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(p,r.__s,A)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(r.props=p,r.state=r.__s,r.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(K){K&&(K.__=t)}),V=0;V<r._sb.length;V++)r.__h.push(r._sb[V]);r._sb=[],r.__h.length&&c.push(r);break t}r.componentWillUpdate!=null&&r.componentWillUpdate(p,r.__s,A),r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(l,y,P)})}if(r.context=A,r.props=p,r.__P=e,r.__e=!1,N=d.__r,Wt=0,"prototype"in C&&C.prototype.render){for(r.state=r.__s,r.__d=!1,N&&N(t),h=r.render(r.props,r.state,r.context),J=0;J<r._sb.length;J++)r.__h.push(r._sb[J]);r._sb=[]}else do r.__d=!1,N&&N(t),h=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++Wt<25);r.state=r.__s,r.getChildContext!=null&&(o=x(x({},o),r.getChildContext())),$||r.getSnapshotBeforeUpdate==null||(P=r.getSnapshotBeforeUpdate(l,y)),ee(e,Ct(dt=h!=null&&h.type===lt&&h.key==null?h.props.children:h)?dt:[dt],t,n,o,i,s,c,_,a,u),r.base=t.__e,t.__u&=-161,r.__h.length&&c.push(r),b&&(r.__E=r.__=null)}catch(K){t.__v=null,a||s!=null?(t.__e=_,t.__u|=a?160:32,s[s.indexOf(_)]=null):(t.__e=n.__e,t.__k=n.__k),d.__e(K,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=me(n.__e,t,n,o,i,s,c,a,u);(h=d.diffed)&&h(t)}function yt(e,t,n){for(var o=0;o<n.length;o++)At(n[o],n[++o],n[++o]);d.__c&&d.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){d.__e(s,i.__v)}})}function me(e,t,n,o,i,s,c,_,a){var u,h,r,$,l,y,P,b=n.props,p=t.props,S=t.type;if(S==="svg"&&(i=!0),s!=null){for(u=0;u<s.length;u++)if((l=s[u])&&"setAttribute"in l==!!S&&(S?l.localName===S:l.nodeType===3)){e=l,s[u]=null;break}}if(e==null){if(S===null)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,p.is&&p),s=null,_=!1}if(S===null)b===p||_&&e.data===p||(e.data=p);else{if(s=s&&at.call(e.childNodes),b=n.props||F,!_&&s!=null)for(b={},u=0;u<e.attributes.length;u++)b[(l=e.attributes[u]).name]=l.value;for(u in b)l=b[u],u=="children"||(u=="dangerouslySetInnerHTML"?r=l:u==="key"||u in p||Q(e,u,null,l,i));for(u in p)l=p[u],u=="children"?$=l:u=="dangerouslySetInnerHTML"?h=l:u=="value"?y=l:u=="checked"?P=l:u==="key"||_&&typeof l!="function"||b[u]===l||Q(e,u,l,b[u],i);if(h)_||r&&(h.__html===r.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(r&&(e.innerHTML=""),ee(e,Ct($)?$:[$],t,n,o,i&&S!=="foreignObject",s,c,s?s[0]:n.__k&&H(n,0),_,a),s!=null)for(u=s.length;u--;)s[u]!=null&&Zt(s[u]);_||(u="value",y!==void 0&&(y!==e[u]||S==="progress"&&!y||S==="option"&&y!==b[u])&&Q(e,u,y,b[u],!1),u="checked",P!==void 0&&P!==e[u]&&Q(e,u,P,b[u],!1))}return e}function At(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){d.__e(o,n)}}function bt(e,t,n){var o,i;if(d.unmount&&d.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||At(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){d.__e(s,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&bt(o[i],t,n||typeof e.type!="function");n||e.__e==null||Zt(e.__e),e.__=e.__e=e.__d=void 0}function ye(e,t,n){return this.constructor(e,n)}function be(e,t,n){var o,i,s,c;d.__&&d.__(e,t),i=(o=typeof n=="function")?null:n&&n.__k||t.__k,s=[],c=[],Pt(t,e=(!o&&n||t).__k=de(lt,null,[e]),i||F,F,t.ownerSVGElement!==void 0,!o&&n?[n]:i?null:t.firstChild?at.call(t.childNodes):null,s,!o&&n?n:i?i.__e:t.firstChild,o,c),e.__d=void 0,yt(s,e,c)}function Se(e,t){var n={__c:t="__cC"+Yt++,__:e,Consumer:function(o,i){return o.children(i)},Provider:function(o){var i,s;return this.getChildContext||(i=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&i.some(function(_){_.__e=!0,mt(_)})},this.sub=function(c){i.push(c);var _=c.componentWillUnmount;c.componentWillUnmount=function(){i.splice(i.indexOf(c),1),_&&_.call(c)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}at=$t.slice,d={__e:function(e,t,n,o){for(var i,s,c;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),c=i.__d),c)return i.__E=i}catch(_){e=_}throw e}},Kt=0,Qt=function(e){return e!=null&&e.constructor==null},I.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof e=="function"&&(e=e(x({},n),this.props)),e&&x(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),mt(this))},I.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),mt(this))},I.prototype.render=lt,M=[],Xt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,gt=function(e,t){return e.__v.__b-t.__v.__b},rt.__r=0,Yt=0;var nt={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0},v={log(...e){this.enabled&&(e.push(Date.now()),nt.logger.log("[ActionCable]",...e))}};const O=()=>new Date().getTime(),X=e=>(O()-e)/1e3;class xt{constructor(t){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=t,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=O(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),v.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=O(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),v.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=O()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,v.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=O(),v.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){const{staleThreshold:t,reconnectionBackoffRate:n}=this.constructor,o=Math.pow(1+n,Math.min(this.reconnectAttempts,10)),s=(this.reconnectAttempts===0?1:n)*Math.random();return t*1e3*o*(1+s)}reconnectIfStale(){this.connectionIsStale()&&(v.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${X(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?v.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${X(this.disconnectedAt)} s`):(v.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return X(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&X(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(v.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}}xt.staleThreshold=6;xt.reconnectionBackoffRate=.15;var oe={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]};const{message_types:D,protocols:St}=oe,ke=St.slice(0,St.length-1),It=[].indexOf;class Tt{constructor(t){this.open=this.open.bind(this),this.consumer=t,this.subscriptions=this.consumer.subscriptions,this.monitor=new xt(this),this.disconnected=!0}send(t){return this.isOpen()?(this.webSocket.send(JSON.stringify(t)),!0):!1}open(){if(this.isActive())return v.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{const t=[...St,...this.consumer.subprotocols||[]];return v.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${t}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new nt.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:t}={allowReconnect:!0}){if(t||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(v.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(t){v.log("Failed to reopen WebSocket",t)}finally{v.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return It.call(ke,this.getProtocol())>=0}isState(...t){return It.call(t,this.getState())>=0}getState(){if(this.webSocket){for(let t in nt.WebSocket)if(nt.WebSocket[t]===this.webSocket.readyState)return t.toLowerCase()}return null}installEventHandlers(){for(let t in this.events){const n=this.events[t].bind(this);this.webSocket[`on${t}`]=n}}uninstallEventHandlers(){for(let t in this.events)this.webSocket[`on${t}`]=function(){}}}Tt.reopenDelay=500;Tt.prototype.events={message(e){if(!this.isProtocolSupported())return;const{identifier:t,message:n,reason:o,reconnect:i,type:s}=JSON.parse(e.data);switch(s){case D.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case D.disconnect:return v.log(`Disconnecting. Reason: ${o}`),this.close({allowReconnect:i});case D.ping:return this.monitor.recordPing();case D.confirmation:return this.subscriptions.confirmSubscription(t),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(t,"connected",{reconnected:!0})):this.subscriptions.notify(t,"connected",{reconnected:!1});case D.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open(){if(v.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return v.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(e){if(v.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){v.log("WebSocket onerror event")}};const we=function(e,t){if(t!=null)for(let n in t){const o=t[n];e[n]=o}return e};class $e{constructor(t,n={},o){this.consumer=t,this.identifier=JSON.stringify(n),we(this,o)}perform(t,n={}){return n.action=t,this.send(n)}send(t){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(t)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}class Ce{constructor(t){this.subscriptions=t,this.pendingSubscriptions=[]}guarantee(t){this.pendingSubscriptions.indexOf(t)==-1?(v.log(`SubscriptionGuarantor guaranteeing ${t.identifier}`),this.pendingSubscriptions.push(t)):v.log(`SubscriptionGuarantor already guaranteeing ${t.identifier}`),this.startGuaranteeing()}forget(t){v.log(`SubscriptionGuarantor forgetting ${t.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(n=>n!==t)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(t=>{v.log(`SubscriptionGuarantor resubscribing ${t.identifier}`),this.subscriptions.subscribe(t)})},500)}}class Pe{constructor(t){this.consumer=t,this.guarantor=new Ce(this),this.subscriptions=[]}create(t,n){const o=t,i=typeof o=="object"?o:{channel:o},s=new $e(this.consumer,i,n);return this.add(s)}add(t){return this.subscriptions.push(t),this.consumer.ensureActiveConnection(),this.notify(t,"initialized"),this.subscribe(t),t}remove(t){return this.forget(t),this.findAll(t.identifier).length||this.sendCommand(t,"unsubscribe"),t}reject(t){return this.findAll(t).map(n=>(this.forget(n),this.notify(n,"rejected"),n))}forget(t){return this.guarantor.forget(t),this.subscriptions=this.subscriptions.filter(n=>n!==t),t}findAll(t){return this.subscriptions.filter(n=>n.identifier===t)}reload(){return this.subscriptions.map(t=>this.subscribe(t))}notifyAll(t,...n){return this.subscriptions.map(o=>this.notify(o,t,...n))}notify(t,n,...o){let i;return typeof t=="string"?i=this.findAll(t):i=[t],i.map(s=>typeof s[n]=="function"?s[n](...o):void 0)}subscribe(t){this.sendCommand(t,"subscribe")&&this.guarantor.guarantee(t)}confirmSubscription(t){v.log(`Subscription confirmed ${t}`),this.findAll(t).map(n=>this.guarantor.forget(n))}sendCommand(t,n){const{identifier:o}=t;return this.consumer.send({command:n,identifier:o})}}class Ae{constructor(t){this._url=t,this.subscriptions=new Pe(this),this.connection=new Tt(this),this.subprotocols=[]}get url(){return xe(this._url)}send(t){return this.connection.send(t)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(t){this.subprotocols=[...this.subprotocols,t]}}function xe(e){if(typeof e=="function"&&(e=e()),e&&!/^wss?:/i.test(e)){const t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}else return e}function Te(e=Me("url")||oe.default_mount_path){return new Ae(e)}function Me(e){const t=document.head.querySelector(`meta[name='action-cable-${e}']`);if(t)return t.getAttribute("content")}const Ue="https://tarus.rentlyprotons.com/cable",Ee=Te(Ue),He=e=>Ee.subscriptions.create({channel:"ChatChannel",conversation_id:e},{received(t){const n=st.state.messages.value;n.pop(),st.state.messages.value=[...n,t.text],st.state.inProcess.value=!1}});var G,w,pt,jt,ct=0,ie=[],ot=[],m=d,Lt=m.__b,Ft=m.__r,Gt=m.diffed,qt=m.__c,zt=m.unmount,Vt=m.__;function Mt(e,t){m.__h&&m.__h(w,e,ct||t),ct=0;var n=w.__H||(w.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ot}),n.__[e]}function se(e,t){var n=Mt(G++,3);!m.__s&&re(n.__H,t)&&(n.__=e,n.i=t,w.__H.__h.push(n))}function Ut(e){return ct=5,ft(function(){return{current:e}},[])}function ft(e,t){var n=Mt(G++,7);return re(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function j(e,t){return ct=8,ft(function(){return e},t)}function q(e){var t=w.context[e.__c],n=Mt(G++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(w)),t.props.value):e.__}function Be(){for(var e;e=ie.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(it),e.__H.__h.forEach(kt),e.__H.__h=[]}catch(t){e.__H.__h=[],m.__e(t,e.__v)}}m.__b=function(e){w=null,Lt&&Lt(e)},m.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Vt&&Vt(e,t)},m.__r=function(e){Ft&&Ft(e),G=0;var t=(w=e.__c).__H;t&&(pt===w?(t.__h=[],w.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ot,n.__N=n.i=void 0})):(t.__h.forEach(it),t.__h.forEach(kt),t.__h=[],G=0)),pt=w},m.diffed=function(e){Gt&&Gt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ie.push(t)!==1&&jt===m.requestAnimationFrame||((jt=m.requestAnimationFrame)||We)(Be)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ot&&(n.__=n.__V),n.i=void 0,n.__V=ot})),pt=w=null},m.__c=function(e,t){t.some(function(n){try{n.__h.forEach(it),n.__h=n.__h.filter(function(o){return!o.__||kt(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],m.__e(o,n.__v)}}),qt&&qt(e,t)},m.unmount=function(e){zt&&zt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{it(o)}catch(i){t=i}}),n.__H=void 0,t&&m.__e(t,n.__v))};var Jt=typeof requestAnimationFrame=="function";function We(e){var t,n=function(){clearTimeout(o),Jt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Jt&&(t=requestAnimationFrame(n))}function it(e){var t=w,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),w=t}function kt(e){var t=w;e.__c=e.__(),w=t}function re(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function ht(){throw new Error("Cycle detected")}var Ne=Symbol.for("preact-signals");function Et(){if(E>1)E--;else{for(var e,t=!1;L!==void 0;){var n=L;for(L=void 0,wt++;n!==void 0;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&_e(n))try{n.c()}catch(i){t||(e=i,t=!0)}n=o}}if(wt=0,E--,t)throw e}}var g=void 0,L=void 0,E=0,wt=0,_t=0;function ce(e){if(g!==void 0){var t=e.n;if(t===void 0||t.t!==g)return t={i:0,S:e,p:g.s,n:void 0,t:g,e:void 0,x:void 0,r:t},g.s!==void 0&&(g.s.n=t),g.s=t,e.n=t,32&g.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=g.s,t.n=void 0,g.s.n=t,g.s=t),t}}function k(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}k.prototype.brand=Ne;k.prototype.h=function(){return!0};k.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};k.prototype.U=function(e){if(this.t!==void 0){var t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}};k.prototype.subscribe=function(e){var t=this;return Bt(function(){var n=t.value,o=32&this.f;this.f&=-33;try{e(n)}finally{this.f|=o}})};k.prototype.valueOf=function(){return this.value};k.prototype.toString=function(){return this.value+""};k.prototype.toJSON=function(){return this.value};k.prototype.peek=function(){return this.v};Object.defineProperty(k.prototype,"value",{get:function(){var e=ce(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(g instanceof T&&function(){throw new Error("Computed cannot have side-effects")}(),e!==this.v){wt>100&&ht(),this.v=e,this.i++,_t++,E++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{Et()}}}});function U(e){return new k(e)}function _e(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function ue(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function ae(e){for(var t=e.s,n=void 0;t!==void 0;){var o=t.p;t.i===-1?(t.S.U(t),o!==void 0&&(o.n=t.n),t.n!==void 0&&(t.n.p=o)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=o}e.s=n}function T(e){k.call(this,void 0),this.x=e,this.s=void 0,this.g=_t-1,this.f=4}(T.prototype=new k).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===_t))return!0;if(this.g=_t,this.f|=1,this.i>0&&!_e(this))return this.f&=-2,!0;var e=g;try{ue(this),g=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return g=e,ae(this),this.f&=-2,!0};T.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}k.prototype.S.call(this,e)};T.prototype.U=function(e){if(this.t!==void 0&&(k.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};T.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};T.prototype.peek=function(){if(this.h()||ht(),16&this.f)throw this.v;return this.v};Object.defineProperty(T.prototype,"value",{get:function(){1&this.f&&ht();var e=ce(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function De(e){return new T(e)}function le(e){var t=e.u;if(e.u=void 0,typeof t=="function"){E++;var n=g;g=void 0;try{t()}catch(o){throw e.f&=-2,e.f|=8,Ht(e),o}finally{g=n,Et()}}}function Ht(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,le(e)}function Oe(e){if(g!==this)throw new Error("Out-of-order effect");ae(this),g=e,this.f&=-2,8&this.f&&Ht(this),Et()}function z(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}z.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};z.prototype.S=function(){1&this.f&&ht(),this.f|=1,this.f&=-9,le(this),ue(this),E++;var e=g;return g=this,Oe.bind(this,e)};z.prototype.N=function(){2&this.f||(this.f|=2,this.o=L,L=this)};z.prototype.d=function(){this.f|=8,1&this.f||Ht(this)};function Bt(e){var t=new z(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var vt;function B(e,t){d[e]=t.bind(null,d[e]||function(){})}function ut(e){vt&&vt(),vt=e&&e.S()}function fe(e){var t=this,n=e.data,o=Ie(n);o.value=n;var i=ft(function(){for(var s=t.__v;s=s.__;)if(s.__c){s.__c.__$f|=4;break}return t.__$u.c=function(){var c;!Qt(i.peek())&&((c=t.base)==null?void 0:c.nodeType)===3?t.base.data=i.peek():(t.__$f|=1,t.setState({}))},De(function(){var c=o.value.value;return c===0?0:c===!0?"":c||""})},[]);return i.value}fe.displayName="_st";Object.defineProperties(k.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:fe},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});B("__b",function(e,t){if(typeof t.type=="string"){var n,o=t.props;for(var i in o)if(i!=="children"){var s=o[i];s instanceof k&&(n||(t.__np=n={}),n[i]=s,o[i]=s.peek())}}e(t)});B("__r",function(e,t){ut();var n,o=t.__c;o&&(o.__$f&=-2,(n=o.__$u)===void 0&&(o.__$u=n=function(i){var s;return Bt(function(){s=this}),s.c=function(){o.__$f|=1,o.setState({})},s}())),ut(n),e(t)});B("__e",function(e,t,n,o){ut(),e(t,n,o)});B("diffed",function(e,t){ut();var n;if(typeof t.type=="string"&&(n=t.__e)){var o=t.__np,i=t.props;if(o){var s=n.U;if(s)for(var c in s){var _=s[c];_!==void 0&&!(c in o)&&(_.d(),s[c]=void 0)}else n.U=s={};for(var a in o){var u=s[a],h=o[a];u===void 0?(u=Re(n,a,h,i),s[a]=u):u.o(h,i)}}}e(t)});function Re(e,t,n,o){var i=t in e&&e.ownerSVGElement===void 0,s=U(n);return{o:function(c,_){s.value=c,o=_},d:Bt(function(){var c=s.value.value;o[t]!==c&&(o[t]=c,i?e[t]=c:c?e.setAttribute(t,c):e.removeAttribute(t))})}}B("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var o=n.U;if(o){n.U=void 0;for(var i in o){var s=o[i];s&&s.d()}}}}else{var c=t.__c;if(c){var _=c.__$u;_&&(c.__$u=void 0,_.d())}}e(t)});B("__h",function(e,t,n,o){(o<3||o===9)&&(t.__$f|=2),e(t,n,o)});I.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u;if(!(n&&n.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var o in t)return!0;for(var i in e)if(i!=="__source"&&e[i]!==this.props[i])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};function Ie(e){return ft(function(){return U(e)},[])}function je(){return{prompt:U(""),messages:U(["Hello, How can I assist you today?"]),socket:U(null),inProcess:U(!1),closePopUp:U(!1)}}const Le="_tarusMessage_kbanj_1",Fe="_avatar_kbanj_5",Ge="_messageContent_kbanj_9",qe="_assistant_kbanj_19",ze="_loader_kbanj_23",Ve="_spin_kbanj_1",R={tarusMessage:Le,avatar:Fe,messageContent:Ge,assistant:qe,loader:ze,spin:Ve};var Je=0;function f(e,t,n,o,i,s){var c,_,a={};for(_ in t)_=="ref"?c=t[_]:a[_]=t[_];var u={type:e,props:a,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Je,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(_ in c)a[_]===void 0&&(a[_]=c[_]);return d.vnode&&d.vnode(u),u}const W=Se({}),st={state:null},Ke=({children:e})=>{const t=je(),n={...t,addMessage:()=>{t.messages.value=[...t.messages.value,t.prompt.value,f("div",{class:R.loader})],t.inProcess.value=!0,t.socket.value.send({user_message:t.prompt.value}),t.prompt.value=""},connectSocket:()=>{fetch("https://tarus.rentlyprotons.com/api/conversations",{method:"POST"}).then(o=>o.json().then(i=>{n.socket.value=He(i.conversation_id)}))}};return st.state=n,f(W.Provider,{value:n,children:e})},Qe="_popUpShade_1m1kx_1",Xe="_endChatPopUp_1m1kx_11",Ye="_endChatButton_1m1kx_45",Ze="_cancelButton_1m1kx_50",Y={popUpShade:Qe,endChatPopUp:Xe,endChatButton:Ye,cancelButton:Ze};function tn(){const e=q(W),t=Ut(null),n=j(s=>{s.target===t.current&&(e.closePopUp.value=!1)},[e]),o=j(async()=>{e.messages.value=[],await e.socket.value.unsubscribe(),e.socket.value=null,e.closePopUp.value=!1,window.parent.postMessage("minimize","*")},[e]),i=j(()=>{e.closePopUp.value=!1},[e]);return f("div",{class:Y.popUpShade,ref:t,onClick:n,children:f("div",{class:Y.endChatPopUp,children:[f("h3",{children:"End Chat"}),f("p",{children:"Are you sure you want to end the chat?"}),f("br",{}),f("button",{class:Y.endChatButton,onClick:o,children:"End Chat"}),f("button",{class:Y.cancelButton,onClick:i,children:"Cancel"})]})})}const en="_header_167p7_1",nn="_tarusTitle_167p7_16",on="_leftMenu_167p7_20",sn="_rightMenu_167p7_20",Z={header:en,tarusTitle:nn,leftMenu:on,rightMenu:sn},rn="assets/DashIcon-39344473.svg",cn="assets/CloseIcon-5cd38e88.svg";function _n(){const e=q(W),t=()=>{window.parent.postMessage("minimize","*")},n=j(()=>{e.closePopUp.value=!0},[e]);return f("div",{class:Z.header,children:[f("div",{class:Z.leftMenu,children:f("span",{class:Z.tarusTitle,children:"Tarus Beta"})}),f("div",{class:Z.rightMenu,children:[f("span",{children:f("img",{onClick:t,alt:"Minimize Icon",src:rn})}),f("span",{children:f("img",{onClick:n,alt:"Close Icon",src:cn})})]})]})}const un="_inputBox_b45of_1",an="_inputWrapper_b45of_12",ln="_sendButton_b45of_39",fn="_startNewButton_b45of_44",tt={inputBox:un,inputWrapper:an,sendButton:ln,startNewButton:fn},hn="assets/SendButton-9aeaa213.svg";function dn(){const e=q(W),t=Ut(null),n=a=>{t.current.style.height=t.current.style.minHeight,t.current.style.height=`${t.current.scrollHeight}px`,e.prompt.value=a.target.value},o=a=>{a.key==="Enter"&&!a.shiftKey&&(e.inProcess.value===!1&&e.prompt.value.length>0&&e.addMessage(),a.preventDefault())},i=j(()=>{e.addMessage()},[e]),s=()=>t.current.focus(),c=()=>{e.connectSocket(),e.messages.value=["Hello, how can I assist you today?"]},_=()=>e.socket.value===null?f("button",{class:tt.startNewButton,onClick:c,children:"Start New Chat"}):f("div",{class:tt.inputWrapper,onClick:s,children:[f("textarea",{type:"text",value:e.prompt.value,ref:t,onInput:n,onKeyDown:o}),f("button",{onClick:i,class:tt.sendButton,children:f("img",{alt:"Send Button",src:hn})})]});return f("div",{class:tt.inputBox,children:_()})}const pn="assets/RentlyBlueIcon-2d94e754.svg";function vn({content:e,role:t}){return f("div",{class:`${R.tarusMessage} ${t==="user"?"user":R.assistant}`,children:[f("span",{class:R.avatar,children:f("img",{alt:"avatar image",width:"32",height:"32",src:t==="user"?"https://use.rently.com/wp-content/uploads/2023/04/rently-renter-259x300.png":pn})}),f("div",{class:R.messageContent,children:e})]})}const gn="_messages_1irbo_1",mn={messages:gn};function yn(){const e=q(W),t=Ut(null),n=e.messages.value;return se(()=>{t.current.scrollTop=t.current.scrollHeight},[n]),f("div",{class:mn.messages,ref:t,children:e.messages.value.map((o,i)=>f(vn,{content:o,role:i%2===1?"user":"assistant"},i))})}const bn="_chatWindow_sfizw_1",Sn={chatWindow:bn};function kn(){const e=q(W);return se(()=>{window.addEventListener("message",t=>{t.data==="initConnection"&&(e.socket.value="",e.connectSocket())})},[e]),f("div",{class:Sn.chatWindow,children:[f(_n,{}),f(yn,{}),e.closePopUp.value===!0?f(tn,{}):null,f(dn,{})]})}function wn(){return f(Ke,{children:f(kn,{})})}be(f(wn,{}),document.querySelector("#tarus"));
